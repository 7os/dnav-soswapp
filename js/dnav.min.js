/*! 7OS -Web dnav: https://github.com/7os/dnav-soswapp
  ! Requires 7os/theme-soswapp available @ https://github.com/7os/theme-soswapp
*/
if(typeof sos=="undefined"){window.sos={}}if(typeof sos.config!=="object"){sos.config={}}sos.config.dnav={iniTopPos:0,top:0,pos:"affix",clearElem:"",fullWidth:false,stickOn:"",container:"",navList:{}};sos.dnav={setup:function(a){if(typeof a=="object"){$.each(a,function(b,c){if(sos.config.dnav[b]!==undefined){if(b in ["iniTopPos","top"]){sos.config.dnav[b]=parseInt(c)}else{if(b in ["fullWidth"]){sos.config.dnav[b]=parseBool(c)}else{sos.config.dnav[b]=c}}}})}if(parseBool(init)){sos.dnav.init()}},init:function(b){if(typeof b=="object"){var e=sos.dnav.checkNavList(b);if(!e){console.error("Invalid navigation list. Kindly reffer/comform to DragNag manual @ https://github.com/7os/dnav-soswapp");return false}sos.config.dnav.navList=e;return true}else{if(!sos.dnav.fetchFile(b)){return false}}var f=sos.dnav.navList;if(typeof f!=="object"||f.length<=0){console.error("No navigation list to display");return false}var g=typeof config.dnav.pos!=="undefined"?config.dnav.pos:"affix";var a=(config.dnav.fullwidth=="true")||(parseInt(config.dnav.fullwidth)>0);var d=(["left","right"]).indexOf(config.dnav.iconpos)>=0?config.dnav.iconpos:"left";var c='<nav id="dnav" class="theme-font color color-face '+g+'">';if(!a){c+='<div class="view-space">'}c+='<button class="btn regular" id="scroll-left"></button>';c+='<button class="btn regular" id="scroll-right"></button>';c+='<div id="dnav-wrap" class="show-direction">';c+="<ul>";$.each(f,function(j,h){c+='<li class="'+h.classname;if(h.name==config.page.name){c+=" current-nav"}c+='"> <a "';if(typeof window[h.link]=="function"){c+=' href="#" onclick="window[\''+h.link+"']()\" "}else{c+=' href="'+h.link+'" '}c+=">";if(d=="left"){c+=' <i class="'+h.icon+'"></i> '}c+=h.title;if(d=="right"){c+=' <i class="'+h.icon+'"></i> '}c+="</a> </li>"});c+="</ul> </div>";if(!a){c+="</div>"}c+="</nav>";$("body").prepend(c);showDNav();showDirection()},fetchFile:function(b){var a={group:sos.config.page.group,format:"json"};$.ajax({url:b,data:a,dataType:"json",type:"get",success:function(c){if(c&&(c.status=="0.0"||c.errors.length<=0)){sos.dnav.navList=c.result}else{console.error("Failed to load navigation from: "+b+". Error: "+c.message)}},error:function(){console.error("Failed to load navigation from: "+b)}});return false},checkNavList:function(a){return a}};function DnOptType(a,b){if(["fullwidth"].includes(a)){return["true","on","yes","1",1,].includes(b.toLowerCase())}else{if(["initop","top"].includes(a)){return parseInt(b)}else{return b}}}function loadDnavSettings(c){var a={};if(typeof c=="object"){a=c}else{var b=$("#settings-dnav");if(b.length>0){a=b.data()}}$.each(a,function(d,e){if(Object.keys(config.dnav).includes(d)){config.dnav[d]=DnOptType(d,e)}})}function navWidth(){var b=$(document).find("#dnav");if(b.length>0){var a=0,c=$(document).find("#dnav ul li");c.each(function(d){a+=$(this).outerWidth()});$(b).find("ul:first").width(a);showDirection()}}function showDNav(){if($(document).find("#dnav.affix, #dnav.fixed").length>0){var b=$(config.dnav.stickon);var a=b.length>0?(b.offset().top+b.outerHeight())-$(window).scrollTop():(typeof config.dnav.initop!=="undefined"?config.dnav.initop:0),c=$(document).find("#dnav.affix").length>0?$(document).find("#dnav.affix"):$(document).find("#dnav.fixed");c.animate({top:a,opacity:1},200,function(){navWidth();if(config.dnav.clearelem.length>0){var e=$(config.dnav.clearelem),d=e.length<=0?0:parseFloat(e.css("margin-top").replace("px",""));if(e.length>0){e.animate({marginTop:c.outerHeight()+d},200)}}})}}function hideDNav(){if($(document).find("#dnav.affix, #dnav.fixed").length>0){var b=$(document).find("#dnav.affix").length>0?$(document).find("#dnav.affix"):$(document).find("#dnav.fixed"),a=b.outerHeight();b.animate({top:-a,opacity:0},200,function(){if(config.dnav.clearelem.length>0){var d=$(config.dnav.clearelem),c=d.length<=0?0:parseFloat(d.css("margin-top").replace("px",""));if(d.length>0){d.animate({marginTop:b.outerHeight()-c},200)}}})}}function showDirection(){var c=$(document).find("#dnav");if(c.length>0){var b=$(window).width(),a=0;$(document).find("#dnav ul li").each(function(){a+=$(this).outerWidth()});if(a>b){c.addClass("show-direction")}else{$("#dnav #dnav-wrap").animate({scrollLeft:0},300);c.removeClass("show-direction")}}}function initdnav(){var b=config.dnav.src;if(!b.length>0){console.error("<b>Drag nav error</b> <br>[src]: No URL was given in config to load dnav.")}else{var a={group:config.page.group,format:"json"};$.ajax({url:b,data:a,dataType:"json",type:"GET",success:function(g){if(g&&(g.status=="0.0"||g.errors.length<=0)){var f=g.result;var h=typeof config.dnav.pos!=="undefined"?config.dnav.pos:"affix";var c=(config.dnav.fullwidth=="true")||(parseInt(config.dnav.fullwidth)>0);var e=(["left","right"]).indexOf(config.dnav.iconpos)>=0?config.dnav.iconpos:"left";var d='<nav id="dnav" class="theme-font color color-face '+h+'">';if(!c){d+='<div class="view-space">'}d+='<button class="btn regular" id="scroll-left"></button>';d+='<button class="btn regular" id="scroll-right"></button>';d+='<div id="dnav-wrap" class="show-direction">';d+="<ul>";$.each(f,function(k,j){d+='<li class="'+j.classname;if(j.name==config.page.name){d+=" current-nav"}d+='"> <a "';if(typeof window[j.link]=="function"){d+=' href="#" onclick="window[\''+j.link+"']()\" "}else{d+=' href="'+j.link+'" '}d+=">";if(e=="left"){d+=' <i class="'+j.icon+'"></i> '}d+=j.title;if(e=="right"){d+=' <i class="'+j.icon+'"></i> '}d+="</a> </li>"});d+="</ul> </div>";if(!c){d+="</div>"}d+="</nav>";$("body").prepend(d);showDNav();showDirection()}else{console.error("Failed to load navigation from: "+b+". Error: "+g.message)}},error:function(){console.error("Failed to load navigation from: "+b)}})}}function dnav(a){loadDnavSettings(a);initdnav();$(window).bind("resize",function(){navWidth()});$(window).scroll(function(){if($(document).find("#dnav.affix, #dnav.fixed").length>0&&config.dnav.initop>0){var b=$(config.dnav.stickon);var d=(b.offset().top+b.outerHeight())-$(window).scrollTop();d=d>=config.dnav.top?d:config.dnav.top;if(b.length>0){var c=$(document).find("#dnav.affix").length>0?$(document).find("#dnav.affix"):$(document).find("#dnav.fixed");c.css({top:d+"px"})}}});$(document).on("click","#dnav #scroll-left",function(){var b=$("#dnav #dnav-wrap").scrollLeft()-100;$("#dnav #dnav-wrap").animate({scrollLeft:b},300)});$(document).on("click","#dnav #scroll-right",function(){var b=$("#dnav #dnav-wrap").scrollLeft()+100;$("#dnav #dnav-wrap").animate({scrollLeft:b},300)})}(function(){$(document).on("mouseover","#dnav.show-direction",function(){$("#dnav #scroll-left, #dnav #scroll-right").css({display:"block",opacity:1});$(document).on("mouseout","#dnav.show-direction",function(){$("#dnav #scroll-left, #dnav #scroll-right").css({display:"none",opacity:0})})})})();